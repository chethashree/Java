<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<title>Flask XML Dashboard</title>

<style>

body {

margin: 0;

font-family: 'Segoe UI', sans-serif;

background: #f4f9f4;

}

header {

display: flex;

justify-content: space-between;

align-items: center;

padding: 16px 32px;

background-color: #2ecc71;

color: white;

}

header img {

height: 40px;

margin-right: 10px;

}

.btn-group button {

background-color: white;

border: none;

padding: 10px 20px;

margin-left: 10px;

color: #2ecc71;

border-radius: 6px;

cursor: pointer;

font-weight: bold;

}
.btn-group button:hover {

background-color: #27ae60;

color: white;

}

.container {

display: flex;

}

.sidebar {

width: 200px;

background-color: #ecf9ec;

padding: 20px;

min-height: 500px;

}

.sidebar button {

width: 100%;

margin-bottom: 15px;

padding: 10px;

background-color: #2ecc71;

color: white;

border: none;

border-radius: 6px;

cursor: pointer;

}

.sidebar button:disabled {

background-color: #ccc;

}

.main {

flex: 1;

padding: 30px;

}
.form-box {

max-width: 400px;

margin: 0 auto;

background: white;

padding: 30px;

border-radius: 12px;

box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

}

label {

display: block;

margin: 10px 0 5px;

color: #2c3e50;

}

input[type="text"] {

width: 100%;

padding: 10px;

border-radius: 6px;

border: 1px solid #ccc;

}

.form-box button {

width: 100%;

margin-top: 15px;

padding: 12px;

background-color: #2ecc71;

color: white;

border: none;

border-radius: 6px;

cursor: pointer;

}

.toggle-link {

text-align: center;

margin-top: 15px;

}
.toggle-link a {

color: #2ecc71;

text-decoration: none;

}

.dashboard-wrapper {

display: flex;

flex-direction: row;

/* Align horizontally */

justify-content: flex-start;

align-items: center;

padding: 20px;

background-color: #eafaf1;

border-radius: 12px;

margin-top: 20px;

box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

}

.dashboard-content {

margin-right: 30px;

padding: 20px;

background: white;

border-radius: 12px;

box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);

color: #2c3e50;

}

.dashboard-content {

font-size: 18px;

}

</style>

</head>

<body>

<header>

<div>
<img src="{{ url_for('static', filename='images/bnp.jpg') }}" alt="Logo">

<span style="font-size: 2em;">BNP Paribas The Bank for changing 

World</span>

</div>

<div class="btn-group">

<button onclick="showForm('register')">Register</button>

<button onclick="showForm('login')">Login</button>

<form action="/logout" method="get" style="display:inline;">

<button type="submit">Logout</button>

</form>

</div>

</header>

<div class="container">

<div class="sidebar">

<button {% if not logged_in %}disabled{% endif %}>Create</button>

<button {% if not logged_in %}disabled{% endif %}>View</button>

</div>

<div class="main">

<div id="register" class="form-box" style="display:none;">

<h2>Register</h2>

<form action="/register" method="post">

<label>Account Name</label>

<input type="text" name="account_name" required>

<label>Application Name</label>

<input type="text" name="application_name" required>

<label>Service Now Name</label>

<input type="text" name="service_now_name" required>

<button type="submit">Register</button>

</form>

<div class="toggle-link">

<a href="javascript:void(0)" onclick="showForm('login')">Already a 

user? Login here</a>

</div>

</div>
<div id="login" class="form-box" style="display:none;">

<h2>Login</h2>

<form action="/login" method="post">

<label>Account Name</label>

<input type="text" name="account_name" required>

<button type="submit">Login</button>

</form>

<div class="toggle-link">

<a href="javascript:void(0)" onclick="showForm('register')">New 

user? Register here</a>

</div>

</div>

{% if logged_in %}

<div class="dashboard-wrapper">

<div class="dashboard-content">

<h2>Welcome {{ account }}</h2>

<p>Application: {{ app_name }}</p>

<p>ServiceNow Name: {{ sn_name }}</p>

</div>

</div>

{% endif %}

</div>

</div>

<script>

function showForm(id) {

document.getElementById('register').style.display = 'none';

document.getElementById('login').style.display = 'none';

document.getElementById(id).style.display = 'block';

}

</script>

</body>

</html>

//////////////////
from flask import Flask, render_template, request, redirect, url_for

import os

import xml.etree.ElementTree as ET

from datetime import datetime

app = Flask(__name__)

XML_FILE = 'data/data.xml'

# Add user to XML

def add_to_xml(account_name, application_name, service_now_name):

if not os.path.exists(XML_FILE):

root = ET.Element("root")

tree = ET.ElementTree(root)

tree.write(XML_FILE)

tree = ET.parse(XML_FILE)

root = tree.getroot()

for entry in root.findall("entry"):

if entry.find("account_name").text == account_name:

return False

new_entry = ET.SubElement(root, "entry")

ET.SubElement(new_entry, "account_name").text = account_name

ET.SubElement(new_entry, "application_name").text = application_name

ET.SubElement(new_entry, "service_now_name").text = service_now_name

ET.SubElement(new_entry, "timestamp").text = datetime.now().strftime("%Y-

%m-%d %H:%M:%S")

tree.write(XML_FILE)

return True

# Get user from XML

def get_account_details(account_name):

if not os.path.exists(XML_FILE):
return None, None, None

tree = ET.parse(XML_FILE)

root = tree.getroot()

for entry in root.findall("entry"):

if entry.find("account_name").text == account_name:

app_name = entry.find("application_name").text

sn_name = entry.find("service_now_name").text

timestamp = entry.find("timestamp").text

return app_name, sn_name, timestamp

return None, None, None

@app.route("/", methods=["GET"])

def index():

return render_template("index.html", logged_in=False)

@app.route("/register", methods=["POST"])

def register():

account = request.form.get("account_name")

app_name = request.form.get("application_name")

sn_name = request.form.get("service_now_name")

success = add_to_xml(account, app_name, sn_name)

if success:

return '''

<script>

alert("Registration Successful!");

window.location.href = "/";

</script>

'''

else:

return '''

<script>

alert("Account already exists!");

window.location.href = "/";

</script>

'''

@app.route("/login", methods=["POST"])
def login():

account = request.form.get("account_name")

app_name, sn_name, timestamp = get_account_details(account)

if app_name:

return render_template("index.html", logged_in=True, account=account, 

app_name=app_name, sn_name=sn_name)

else:

return '''

<script>

alert("Invalid account name.");

window.location.href = "/";

</script>

'''

@app.route("/logout")

def logout():

return redirect(url_for("index"))

if __name__ == "__main__":

app.run(debug=True)
